# Hasq Technology Pty Ltd (C) 2013-2016

JQUID=../../ext/jq/
JQUIF=jquery-ui-1.11.4.custom
JQUI=$(JQUID)$(JQUIF)

all: hqcl_wid_stc_help_tab.js lib/jquery-ui slice/hqclnt/index.html

hqcl_wid_stc_help_tab.tmp: front/hqcl_wid_stc_help_tab.js txt/*.htm
	echo "////////////////////////////////////////////////////" > front/hqcl_wid_stc_help_tab.tmp
	echo "//   THIS IS AUTOGENERATED FILE, DO NOT MODIFY    //" >> front/hqcl_wid_stc_help_tab.tmp
	echo "////////////////////////////////////////////////////" >> front/hqcl_wid_stc_help_tab.tmp
	echo "" >> front/hqcl_wid_stc_help_tab.tmp
	cat front/hqcl_wid_stc_help_tab.js >> front/hqcl_wid_stc_help_tab.tmp

hqcl_wid_stc_help_tab.js: hqcl_wid_stc_help_tab.tmp
	sh subster.sh < front/hqcl_wid_stc_help_tab.tmp > front/hqcl_wid_stc_help_tab.gen
	rm front/hqcl_wid_stc_help_tab.tmp	

lib/jquery-ui: $(JQUI).tar.bz2
	cp $< lib/
	cd lib && make NAME=$(JQUIF)

slice/hqclnt/index.html: index.html 
#	hqclnt
	mkdir -p slice/hqclnt/ui
	mkdir -p slice/hqclnt/lib
	mkdir -p slice/hqclnt/lib/images
	mkdir -p slice/hqclnt/front
	mkdir -p slice/hqclnt/engine
	mkdir -p slice/hqclnt/images
	cp engine/*.js slice/hqclnt/engine/
	cp ui/*.js slice/hqclnt/ui/
	cp front/hqcl_wid_dyn_base.js slice/hqclnt/front/
	cp front/hqcl_wid_stc_base.js slice/hqclnt/front/
	mv front/hqcl_wid_stc_help_tab.gen slice/hqclnt/front/hqcl_wid_stc_help_tab.js
	cp front/hqcl_wid_dyn_tokens_tab.js slice/hqclnt/front/
	cp front/hqcl_wid_stc_tokens_tab.js slice/hqclnt/front/
	cp hqclnt.html slice/hqclnt/home.html
	cp images/*.gif slice/hqclnt/images/
	cp index.html slice/hqclnt/
	cp lib/jquery-ui/jquery-ui.min.js slice/hqclnt/lib/
	cp lib/jquery-ui/external/jquery/jquery.js slice/hqclnt/lib/
	cp lib/jquery-ui/jquery-ui.min.css slice/hqclnt/lib/
	cp lib/jquery-ui/images/ui-icons*.png slice/hqclnt/lib/images/
	chmod 0777 -R slice/hqclnt
#	tsclnt
	mkdir -p slice/tsclnt/ui
	mkdir -p slice/tsclnt/lib
	mkdir -p slice/tsclnt/lib/images
	mkdir -p slice/tsclnt/front
	mkdir -p slice/tsclnt/engine
	mkdir -p slice/tsclnt/images
	cp engine/eng_ajax.js slice/tsclnt/engine/
	cp ui/tscl_ui_doc_main.js slice/tsclnt/ui/
	cp front/tscl_wid_stc_base.js slice/tsclnt/front/
	cp tsclnt.html slice/tsclnt/home.html
	cp images/*.gif slice/tsclnt/images/
	cp index.html slice/tsclnt/
	cp lib/jquery-ui/jquery-ui.min.js slice/tsclnt/lib/
	cp lib/jquery-ui/external/jquery/jquery.js slice/tsclnt/lib/
	cp lib/jquery-ui/jquery-ui.min.css slice/tsclnt/lib/
	cp lib/jquery-ui/images/ui-icons*.png slice/tsclnt/lib/images/
	cp engine/hash_*.js slice/tsclnt/engine/
	chmod 0777 -R slice/tsclnt
	
clean:
	rm -rf lib/jquery* slice/hqclnt slice/tsclnt index lib/*.tar lib/*.tar.bz2
	rm -rf slice/_MD5DB/2016 slice/_MD5DB/meta
	rm -rf slice/_R16DB/2016 slice/_R16DB/meta
	rm -rf slice/_S225DB/2016 slice/_S22DB/meta
	rm -rf slice/_S25DB/2016 slice/_S25DB/meta
	rm -rf slice/_MWRDB/2016 slice/_WRDDB/meta
	rm -rf front/hqcl_wid_stc_help_tab.gen
	rm -rf front/hqcl_wid_stc_help_tab.tmp
	rm -rf hq.13151.lock
	
myclean:
	rm -rf slice/hqclnt index slice/tsclnt
	rm -rf slice/_MD5DB/2016 slice/_MD5DB/meta
	rm -rf slice/_R16DB/2016 slice/_R16DB/meta
	rm -rf slice/_S225DB/2016 slice/_S22DB/meta
	rm -rf slice/_S25DB/2016 slice/_S25DB/meta
	rm -rf slice/_MWRDB/2016 slice/_WRDDB/meta
	
checkin:
#	hqclnt
	cp -f slice/hqclnt/front/hqcl_wid_dyn_base.js front/
	cp -f slice/hqclnt/front/hqcl_wid_stc_base.js front/
	cp -f slice/hqclnt/front/hqcl_wid_stc_tokens_tab.js front/
	cp -f slice/hqclnt/front/hqcl_wid_stc_tokens_tab.js front/
	cp -f slice/hqclnt/engine/*.js engine/
	cp -f slice/hqclnt/ui/*.js ui/
	cp -f slice/hqclnt/home.html ./hqclnt.html
	cp -f slice/hqclnt/index.html ./
#	tsclnt
	cp -f slice/tsclnt/engine/*.js engine/
	cp -f slice/tsclnt/ui/*.js ui/
	cp -f slice/tsclnt/home.html ./tsclnt.html	